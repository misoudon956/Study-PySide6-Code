# 08_Mouse_Events まとめ

このセクションでは、マウスの動きやクリックを検知する「マウスイベント」の扱い方を学びました。

## マウスイベントとは？

ユーザーがマウスを操作したときに発生するイベントです。`QWidget`や`QMainWindow`が持つ特定のメソッドをオーバーライドすることで、これらのイベントを捕捉し、独自の処理を実行できます。

## 主なマウスイベントメソッド

- **`mousePressEvent(self, event)`**: マウスのボタンが**押された**ときに呼び出されます。

- **`mouseReleaseEvent(self, event)`**: マウスのボタンが**離された**ときに呼び出されます。

- **`mouseMoveEvent(self, event)`**: マウスカーソルが**動いた**ときに呼び出されます。
  - **注意**: デフォルトでは、いずれかのマウスボタンが押されたまま動いた場合にのみ発生します。ボタンが押されていなくても発生させたい場合は、ウィジェットに対して `self.setMouseTracking(True)` を呼び出す必要があります。

- **`mouseDoubleClickEvent(self, event)`**: マウスが**ダブルクリック**されたときに呼び出されます。

## イベントオブジェクト `event`

これらのメソッドは、引数として `event` オブジェクトを受け取ります。このオブジェクトには、イベントに関する詳細な情報が含まれています。

- **`event.position()`**: イベントが発生したウィジェットのローカル座標（`QPointF`型）を返します。
  - `.x()` と `.y()` で各座標を取得できます。
  - 整数座標が欲しい場合は `.toPoint()` を使います。

- **`event.button()`**: どのマウスボタンが操作されたかを返します。
  - `Qt.LeftButton`, `Qt.RightButton`, `Qt.MiddleButton` などと比較して判定できます。

## 応用: ドラッグアンドドロップの実装

`mousePressEvent`, `mouseMoveEvent`, `mouseReleaseEvent` の3つを組み合わせることで、ウィジェットのドラッグアンドドロップのような直感的な操作を実装できます。

1. `mousePressEvent`で、ドラッグ対象の上でクリックされたことを確認し、フラグを立てる。
2. `mouseMoveEvent`で、フラグが立っている間、マウスの動きに合わせて対象を `.move()` で動かす。
3. `mouseReleaseEvent`で、フラグを降ろしてドラッグを終了する。
