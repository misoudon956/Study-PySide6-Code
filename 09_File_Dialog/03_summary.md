# 09_File_Dialog まとめ

このセクションでは、ユーザーにファイルを選択させたり、保存場所を指定させたりするための `QFileDialog` の使い方を学びました。

## `QFileDialog` とは？

`QFileDialog` は、OS標準のファイル選択ダイアログを表示するためのクラスです。これにより、アプリケーションはユーザーのファイルシステムと安全に対話できます。

## 静的メソッドによる簡単な呼び出し

`QFileDialog` のインスタンスを毎回作成する代わりに、便利な**静的メソッド**を使うのが一般的です。

- **`QFileDialog.getOpenFileName()`**: ファイルを**開く**ためのダイアログを表示します。
- **`QFileDialog.getSaveFileName()`**: ファイルを**保存**するためのダイアログを表示します。

## 使い方と引数

```python
file_path, selected_filter = QFileDialog.getOpenFileName(
    parent,           # 親ウィジェット (通常は self)
    "Dialog Title",   # ダイアログのタイトルバーに表示されるテキスト
    "/home/user",     # 初期ディレクトリ (空文字列ならデフォルト)
    "Filter String"   # ファイルの種類をフィルタリングする文字列
)
```

- **`parent`**: ダイアログがどのウィンドウに属するかを示します。`self` を指定するのが一般的です。
- **`caption`**: ダイアログのタイトルです。
- **`dir`**: ダイアログが最初に開くディレクトリのパスです。
- **`filter`**: 表示するファイルの種類を制限するフィルタです。
  - `"表示名 (*.拡張子)"` の形式で記述します。
  - 複数のフィルタは `;;` で区切ります。
  - 例: `"Images (*.png *.jpg);;Text Files (*.txt)"`

## 戻り値

これらのメソッドは、2つの値を持つ**タプル** `(filePath, selectedFilter)` を返します。

- **`filePath` (str)**: ユーザーが選択したファイルのフルパスです。
  - ユーザーがダイアログをキャンセルした場合（「キャンセル」ボタンを押す、ウィンドウを閉じるなど）、この値は**空の文字列 `""`** になります。
  - そのため、`if filePath:` のようにして、ファイルが実際に選択されたかどうかを必ずチェックする必要があります。

- **`selectedFilter` (str)**: ユーザーがどのフィルタを選択したかを返します。

ファイルダイアログは、CodeSmithの保存・読み込み機能など、ファイル操作が関わるアプリケーションの必須機能です。
